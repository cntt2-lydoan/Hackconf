{"version":3,"sources":["../../js/foundation.util.triggers.js"],"names":["$","MutationObserver","prefixes","i","length","window","triggers","el","type","data","split","forEach","id","document","on","trigger","e","stopPropagation","animation","Foundation","Motion","animateOut","fadeOut","triggerHandler","load","checkListeners","eventsListener","resizeListener","scrollListener","closemeListener","pluginName","yetiBoxes","plugNames","push","concat","console","error","listeners","map","name","join","off","pluginId","plugin","namespace","plugins","not","each","_this","debounce","timer","$nodes","clearTimeout","setTimeout","attr","nodes","querySelectorAll","listeningElementsMutation","mutationRecordsList","$target","target","pageYOffset","elementObserver","observe","attributes","childList","characterData","subtree","attributeFilter","IHearYou","jQuery"],"mappings":"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","file":"foundation.util.triggers.js","sourcesContent":["'use strict';\n\n!function($) {\n\nconst MutationObserver = (function () {\n  var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n  for (var i=0; i < prefixes.length; i++) {\n    if (`${prefixes[i]}MutationObserver` in window) {\n      return window[`${prefixes[i]}MutationObserver`];\n    }\n  }\n  return false;\n}());\n\nconst triggers = (el, type) => {\n  el.data(type).split(' ').forEach(id => {\n    $(`#${id}`)[ type === 'close' ? 'trigger' : 'triggerHandler'](`${type}.zf.trigger`, [el]);\n  });\n};\n// Elements with [data-open] will reveal a plugin that supports it when clicked.\n$(document).on('click.zf.trigger', '[data-open]', function() {\n  triggers($(this), 'open');\n});\n\n// Elements with [data-close] will close a plugin that supports it when clicked.\n// If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\n$(document).on('click.zf.trigger', '[data-close]', function() {\n  let id = $(this).data('close');\n  if (id) {\n    triggers($(this), 'close');\n  }\n  else {\n    $(this).trigger('close.zf.trigger');\n  }\n});\n\n// Elements with [data-toggle] will toggle a plugin that supports it when clicked.\n$(document).on('click.zf.trigger', '[data-toggle]', function() {\n  triggers($(this), 'toggle');\n});\n\n// Elements with [data-closable] will respond to close.zf.trigger events.\n$(document).on('close.zf.trigger', '[data-closable]', function(e){\n  e.stopPropagation();\n  let animation = $(this).data('closable');\n\n  if(animation !== ''){\n    Foundation.Motion.animateOut($(this), animation, function() {\n      $(this).trigger('closed.zf');\n    });\n  }else{\n    $(this).fadeOut().trigger('closed.zf');\n  }\n});\n\n$(document).on('focus.zf.trigger blur.zf.trigger', '[data-toggle-focus]', function() {\n  let id = $(this).data('toggle-focus');\n  $(`#${id}`).triggerHandler('toggle.zf.trigger', [$(this)]);\n});\n\n/**\n* Fires once after all other scripts have loaded\n* @function\n* @private\n*/\n$(window).load(() => {\n  checkListeners();\n});\n\nfunction checkListeners() {\n  eventsListener();\n  resizeListener();\n  scrollListener();\n  closemeListener();\n}\n\n//******** only fires this function once on load, if there's something to watch ********\nfunction closemeListener(pluginName) {\n  var yetiBoxes = $('[data-yeti-box]'),\n      plugNames = ['dropdown', 'tooltip', 'reveal'];\n\n  if(pluginName){\n    if(typeof pluginName === 'string'){\n      plugNames.push(pluginName);\n    }else if(typeof pluginName === 'object' && typeof pluginName[0] === 'string'){\n      plugNames.concat(pluginName);\n    }else{\n      console.error('Plugin names must be strings');\n    }\n  }\n  if(yetiBoxes.length){\n    let listeners = plugNames.map((name) => {\n      return `closeme.zf.${name}`;\n    }).join(' ');\n\n    $(window).off(listeners).on(listeners, function(e, pluginId){\n      let plugin = e.namespace.split('.')[0];\n      let plugins = $(`[data-${plugin}]`).not(`[data-yeti-box=\"${pluginId}\"]`);\n\n      plugins.each(function(){\n        let _this = $(this);\n\n        _this.triggerHandler('close.zf.trigger', [_this]);\n      });\n    });\n  }\n}\n\nfunction resizeListener(debounce){\n  let timer,\n      $nodes = $('[data-resize]');\n  if($nodes.length){\n    $(window).off('resize.zf.trigger')\n    .on('resize.zf.trigger', function(e) {\n      if (timer) { clearTimeout(timer); }\n\n      timer = setTimeout(function(){\n\n        if(!MutationObserver){//fallback for IE 9\n          $nodes.each(function(){\n            $(this).triggerHandler('resizeme.zf.trigger');\n          });\n        }\n        //trigger all listening elements and signal a resize event\n        $nodes.attr('data-events', \"resize\");\n      }, debounce || 10);//default time to emit resize event\n    });\n  }\n}\n\nfunction scrollListener(debounce){\n  let timer,\n      $nodes = $('[data-scroll]');\n  if($nodes.length){\n    $(window).off('scroll.zf.trigger')\n    .on('scroll.zf.trigger', function(e){\n      if(timer){ clearTimeout(timer); }\n\n      timer = setTimeout(function(){\n\n        if(!MutationObserver){//fallback for IE 9\n          $nodes.each(function(){\n            $(this).triggerHandler('scrollme.zf.trigger');\n          });\n        }\n        //trigger all listening elements and signal a scroll event\n        $nodes.attr('data-events', \"scroll\");\n      }, debounce || 10);//default time to emit scroll event\n    });\n  }\n}\n\nfunction eventsListener() {\n  if(!MutationObserver){ return false; }\n  let nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\n\n  //element callback\n  var listeningElementsMutation = function(mutationRecordsList) {\n    var $target = $(mutationRecordsList[0].target);\n    //trigger the event handler for the element depending on type\n    switch ($target.attr(\"data-events\")) {\n\n      case \"resize\" :\n      $target.triggerHandler('resizeme.zf.trigger', [$target]);\n      break;\n\n      case \"scroll\" :\n      $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\n      break;\n\n      // case \"mutate\" :\n      // console.log('mutate', $target);\n      // $target.triggerHandler('mutate.zf.trigger');\n      //\n      // //make sure we don't get stuck in an infinite loop from sloppy codeing\n      // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\n      //   domMutationObserver();\n      // }\n      // break;\n\n      default :\n      return false;\n      //nothing\n    }\n  }\n\n  if(nodes.length){\n    //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\n    for (var i = 0; i <= nodes.length-1; i++) {\n      let elementObserver = new MutationObserver(listeningElementsMutation);\n      elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree:false, attributeFilter:[\"data-events\"]});\n    }\n  }\n}\n\n// ------------------------------------\n\n// [PH]\n// Foundation.CheckWatchers = checkWatchers;\nFoundation.IHearYou = checkListeners;\n// Foundation.ISeeYou = scrollListener;\n// Foundation.IFeelYou = closemeListener;\n\n}(jQuery);\n\n// function domMutationObserver(debounce) {\n//   // !!! This is coming soon and needs more work; not active  !!! //\n//   var timer,\n//   nodes = document.querySelectorAll('[data-mutate]');\n//   //\n//   if (nodes.length) {\n//     // var MutationObserver = (function () {\n//     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n//     //   for (var i=0; i < prefixes.length; i++) {\n//     //     if (prefixes[i] + 'MutationObserver' in window) {\n//     //       return window[prefixes[i] + 'MutationObserver'];\n//     //     }\n//     //   }\n//     //   return false;\n//     // }());\n//\n//\n//     //for the body, we need to listen for all changes effecting the style and class attributes\n//     var bodyObserver = new MutationObserver(bodyMutation);\n//     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\n//\n//\n//     //body callback\n//     function bodyMutation(mutate) {\n//       //trigger all listening elements and signal a mutation event\n//       if (timer) { clearTimeout(timer); }\n//\n//       timer = setTimeout(function() {\n//         bodyObserver.disconnect();\n//         $('[data-mutate]').attr('data-events',\"mutate\");\n//       }, debounce || 150);\n//     }\n//   }\n// }\n"]}